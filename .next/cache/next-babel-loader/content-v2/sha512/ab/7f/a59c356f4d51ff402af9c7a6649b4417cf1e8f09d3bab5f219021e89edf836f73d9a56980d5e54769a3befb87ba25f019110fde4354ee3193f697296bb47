{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/vsvij/Desktop/MERN Projects/social-media/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"C:/Users/vsvij/Desktop/MERN Projects/social-media/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"C:/Users/vsvij/Desktop/MERN Projects/social-media/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"C:/Users/vsvij/Desktop/MERN Projects/social-media/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from \"axios\";\nimport baseUrl from \"./baseUrl\";\nimport catchErrors from \"./catchErrors\";\nimport cookie from \"js-cookie\";\nimport Router from \"next/router\";\nvar Axios = axios.create({\n  baseURL: \"\".concat(baseUrl, \"/api/profile\"),\n  headers: {\n    Authorization: cookie.get(\"token\")\n  }\n});\nexport var followUser = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(userToFollowId, setUserFollowStats) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return Axios.post(\"/follow/\".concat(userToFollowId));\n\n          case 3:\n            setUserFollowStats(function (prev) {\n              return _objectSpread(_objectSpread({}, prev), {}, {\n                following: [].concat(_toConsumableArray(prev.following), [{\n                  user: userToFollowId\n                }])\n              });\n            });\n            _context.next = 9;\n            break;\n\n          case 6:\n            _context.prev = 6;\n            _context.t0 = _context[\"catch\"](0);\n            alert(catchErrors(_context.t0));\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 6]]);\n  }));\n\n  return function followUser(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var unfollowUser = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userToUnfollowId, setUserFollowStats) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return Axios.put(\"/unfollow/\".concat(userToUnfollowId));\n\n          case 3:\n            setUserFollowStats(function (prev) {\n              return _objectSpread(_objectSpread({}, prev), {}, {\n                following: prev.following.filter(function (following) {\n                  return following.user !== userToUnfollowId;\n                })\n              });\n            });\n            _context2.next = 9;\n            break;\n\n          case 6:\n            _context2.prev = 6;\n            _context2.t0 = _context2[\"catch\"](0);\n            alert(catchErrors(_context2.t0));\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 6]]);\n  }));\n\n  return function unfollowUser(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var profileUpdate = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(profile, setLoading, setError, profilePicUrl) {\n    var bio, facebook, youtube, twitter, instagram;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            bio = profile.bio, facebook = profile.facebook, youtube = profile.youtube, twitter = profile.twitter, instagram = profile.instagram;\n            _context3.next = 4;\n            return Axios.post(\"/update\", {\n              bio: bio,\n              facebook: facebook,\n              youtube: youtube,\n              twitter: twitter,\n              instagram: instagram,\n              profilePicUrl: profilePicUrl\n            });\n\n          case 4:\n            setLoading(false);\n            Router.reload();\n            _context3.next = 12;\n            break;\n\n          case 8:\n            _context3.prev = 8;\n            _context3.t0 = _context3[\"catch\"](0);\n            setError(catchErrors(_context3.t0));\n            setLoading(false);\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 8]]);\n  }));\n\n  return function profileUpdate(_x5, _x6, _x7, _x8) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var passwordUpdate = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(setSuccess, userPasswords) {\n    var currentPassword, newPassword;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            currentPassword = userPasswords.currentPassword, newPassword = userPasswords.newPassword;\n            _context4.prev = 1;\n            _context4.next = 4;\n            return Axios.post(\"/settings/password\", {\n              currentPassword: currentPassword,\n              newPassword: newPassword\n            });\n\n          case 4:\n            setSuccess(true);\n            _context4.next = 10;\n            break;\n\n          case 7:\n            _context4.prev = 7;\n            _context4.t0 = _context4[\"catch\"](1);\n            alert(catchErrors(_context4.t0));\n\n          case 10:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[1, 7]]);\n  }));\n\n  return function passwordUpdate(_x9, _x10) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nexport var toggleMessagePopup = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(popupSetting, setPopupSetting, setSuccess) {\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.prev = 0;\n            _context5.next = 3;\n            return Axios.post(\"/settings/messagePopup\");\n\n          case 3:\n            setPopupSetting(!popupSetting);\n            setSuccess(true);\n            _context5.next = 10;\n            break;\n\n          case 7:\n            _context5.prev = 7;\n            _context5.t0 = _context5[\"catch\"](0);\n            alert(catchErrors(_context5.t0));\n\n          case 10:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5, null, [[0, 7]]);\n  }));\n\n  return function toggleMessagePopup(_x11, _x12, _x13) {\n    return _ref5.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["C:/Users/vsvij/Desktop/MERN Projects/social-media/utils/profileActions.js"],"names":["axios","baseUrl","catchErrors","cookie","Router","Axios","create","baseURL","headers","Authorization","get","followUser","userToFollowId","setUserFollowStats","post","prev","following","user","alert","unfollowUser","userToUnfollowId","put","filter","profileUpdate","profile","setLoading","setError","profilePicUrl","bio","facebook","youtube","twitter","instagram","reload","passwordUpdate","setSuccess","userPasswords","currentPassword","newPassword","toggleMessagePopup","popupSetting","setPopupSetting"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport baseUrl from \"./baseUrl\";\r\nimport catchErrors from \"./catchErrors\";\r\nimport cookie from \"js-cookie\";\r\nimport Router from \"next/router\";\r\n\r\nconst Axios = axios.create({\r\n  baseURL: `${baseUrl}/api/profile`,\r\n  headers: { Authorization: cookie.get(\"token\") }\r\n});\r\n\r\nexport const followUser = async (userToFollowId, setUserFollowStats) => {\r\n  try {\r\n    await Axios.post(`/follow/${userToFollowId}`);\r\n\r\n    setUserFollowStats(prev => ({\r\n      ...prev,\r\n      following: [...prev.following, { user: userToFollowId }]\r\n    }));\r\n  } catch (error) {\r\n    alert(catchErrors(error));\r\n  }\r\n};\r\n\r\nexport const unfollowUser = async (userToUnfollowId, setUserFollowStats) => {\r\n  try {\r\n    await Axios.put(`/unfollow/${userToUnfollowId}`);\r\n\r\n    setUserFollowStats(prev => ({\r\n      ...prev,\r\n      following: prev.following.filter(following => following.user !== userToUnfollowId)\r\n    }));\r\n  } catch (error) {\r\n    alert(catchErrors(error));\r\n  }\r\n};\r\n\r\nexport const profileUpdate = async (profile, setLoading, setError, profilePicUrl) => {\r\n  try {\r\n    const { bio, facebook, youtube, twitter, instagram } = profile;\r\n\r\n    await Axios.post(`/update`, {\r\n      bio,\r\n      facebook,\r\n      youtube,\r\n      twitter,\r\n      instagram,\r\n      profilePicUrl\r\n    });\r\n\r\n    setLoading(false);\r\n    Router.reload();\r\n  } catch (error) {\r\n    setError(catchErrors(error));\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\nexport const passwordUpdate = async (setSuccess, userPasswords) => {\r\n  const { currentPassword, newPassword } = userPasswords;\r\n  try {\r\n    await Axios.post(`/settings/password`, { currentPassword, newPassword });\r\n\r\n    setSuccess(true);\r\n  } catch (error) {\r\n    alert(catchErrors(error));\r\n  }\r\n};\r\n\r\nexport const toggleMessagePopup = async (popupSetting, setPopupSetting, setSuccess) => {\r\n  try {\r\n    await Axios.post(`/settings/messagePopup`);\r\n\r\n    setPopupSetting(!popupSetting);\r\n    setSuccess(true);\r\n  } catch (error) {\r\n    alert(catchErrors(error));\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}