{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\vsvij\\\\Desktop\\\\MERN Projects\\\\social-media\\\\pages\\\\[username].js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport axios from \"axios\";\nimport baseUrl from \"../utils/baseUrl\";\nimport { parseCookies } from \"nookies\";\nimport { Grid } from \"semantic-ui-react\";\nimport { NoProfilePosts, NoProfile } from \"../components/Layout/NoData\";\nimport CardPost from \"../components/Post/CardPost\";\nimport cookie from \"js-cookie\";\nimport { PlaceHolderPosts } from \"../components/Layout/PlaceHolderGroup\";\nimport ProfileMenuTabs from \"../components/Profile/ProfileMenuTabs\";\nimport ProfileHeader from \"../components/Profile/ProfileHeader\";\nimport Followers from \"../components/Profile/Followers\";\nimport Following from \"../components/Profile/Following\";\nimport UpdateProfile from \"../components/Profile/UpdateProfile\";\nimport Settings from \"../components/Profile/Settings\";\nimport { PostDeleteToastr } from \"../components/Layout/Toastr\";\n\nfunction ProfilePage({\n  errorLoading,\n  profile,\n  followersLength,\n  followingLength,\n  user,\n  userFollowStats\n}) {\n  const router = useRouter();\n  const {\n    0: posts,\n    1: setPosts\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: showToastr,\n    1: setShowToastr\n  } = useState(false);\n  const {\n    0: activeItem,\n    1: setActiveItem\n  } = useState(\"profile\");\n\n  const handleItemClick = clickedTab => setActiveItem(clickedTab);\n\n  const {\n    0: loggedUserFollowStats,\n    1: setUserFollowStats\n  } = useState(userFollowStats);\n  const ownAccount = profile.user._id === user._id;\n  if (errorLoading) return /*#__PURE__*/_jsxDEV(NoProfile, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 28\n  }, this);\n  useEffect(() => {\n    const getPosts = async () => {\n      setLoading(true);\n\n      try {\n        const {\n          username\n        } = router.query;\n        const res = await axios.get(`${baseUrl}/api/profile/posts/${username}`, {\n          headers: {\n            Authorization: cookie.get(\"token\")\n          }\n        });\n        setPosts(res.data);\n      } catch (error) {\n        alert(\"Error Loading Posts\");\n      }\n\n      setLoading(false);\n    };\n\n    getPosts();\n  }, [router.query.username]);\n  useEffect(() => {\n    showToastr && setTimeout(() => setShowToastr(false), 3000);\n  }, [showToastr]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [showToastr && /*#__PURE__*/_jsxDEV(PostDeleteToastr, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 22\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      stackable: true,\n      children: [/*#__PURE__*/_jsxDEV(Grid.Row, {\n        children: /*#__PURE__*/_jsxDEV(Grid.Column, {\n          children: /*#__PURE__*/_jsxDEV(ProfileMenuTabs, {\n            activeItem: activeItem,\n            handleItemClick: handleItemClick,\n            followersLength: followersLength,\n            followingLength: followingLength,\n            ownAccount: ownAccount,\n            loggedUserFollowStats: loggedUserFollowStats\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid.Row, {\n        children: /*#__PURE__*/_jsxDEV(Grid.Column, {\n          children: [activeItem === \"profile\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(ProfileHeader, {\n              profile: profile,\n              ownAccount: ownAccount,\n              loggedUserFollowStats: loggedUserFollowStats,\n              setUserFollowStats: setUserFollowStats\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 17\n            }, this), loading ? /*#__PURE__*/_jsxDEV(PlaceHolderPosts, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 19\n            }, this) : posts.length > 0 ? posts.map(post => /*#__PURE__*/_jsxDEV(CardPost, {\n              post: post,\n              user: user,\n              setPosts: setPosts,\n              setShowToastr: setShowToastr\n            }, post._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 21\n            }, this)) : /*#__PURE__*/_jsxDEV(NoProfilePosts, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true), activeItem === \"followers\" && /*#__PURE__*/_jsxDEV(Followers, {\n            user: user,\n            loggedUserFollowStats: loggedUserFollowStats,\n            setUserFollowStats: setUserFollowStats,\n            profileUserId: profile.user._id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this), activeItem === \"following\" && /*#__PURE__*/_jsxDEV(Following, {\n            user: user,\n            loggedUserFollowStats: loggedUserFollowStats,\n            setUserFollowStats: setUserFollowStats,\n            profileUserId: profile.user._id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 15\n          }, this), activeItem === \"updateProfile\" && /*#__PURE__*/_jsxDEV(UpdateProfile, {\n            Profile: profile\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 48\n          }, this), activeItem === \"settings\" && /*#__PURE__*/_jsxDEV(Settings, {\n            newMessagePopup: user.newMessagePopup\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\nProfilePage.getInitialProps = async ctx => {\n  try {\n    const {\n      username\n    } = ctx.query;\n    const {\n      token\n    } = parseCookies(ctx);\n    const res = await axios.get(`${baseUrl}/api/profile/${username}`, {\n      headers: {\n        Authorization: token\n      }\n    });\n    const {\n      profile,\n      followersLength,\n      followingLength\n    } = res.data;\n    return {\n      profile,\n      followersLength,\n      followingLength\n    };\n  } catch (error) {\n    return {\n      errorLoading: true\n    };\n  }\n};\n\nexport default ProfilePage;","map":{"version":3,"sources":["C:/Users/vsvij/Desktop/MERN Projects/social-media/pages/[username].js"],"names":["React","useEffect","useState","useRouter","axios","baseUrl","parseCookies","Grid","NoProfilePosts","NoProfile","CardPost","cookie","PlaceHolderPosts","ProfileMenuTabs","ProfileHeader","Followers","Following","UpdateProfile","Settings","PostDeleteToastr","ProfilePage","errorLoading","profile","followersLength","followingLength","user","userFollowStats","router","posts","setPosts","loading","setLoading","showToastr","setShowToastr","activeItem","setActiveItem","handleItemClick","clickedTab","loggedUserFollowStats","setUserFollowStats","ownAccount","_id","getPosts","username","query","res","get","headers","Authorization","data","error","alert","setTimeout","length","map","post","newMessagePopup","getInitialProps","ctx","token"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport axios from \"axios\";\r\nimport baseUrl from \"../utils/baseUrl\";\r\nimport { parseCookies } from \"nookies\";\r\nimport { Grid } from \"semantic-ui-react\";\r\nimport { NoProfilePosts, NoProfile } from \"../components/Layout/NoData\";\r\nimport CardPost from \"../components/Post/CardPost\";\r\nimport cookie from \"js-cookie\";\r\nimport { PlaceHolderPosts } from \"../components/Layout/PlaceHolderGroup\";\r\nimport ProfileMenuTabs from \"../components/Profile/ProfileMenuTabs\";\r\nimport ProfileHeader from \"../components/Profile/ProfileHeader\";\r\nimport Followers from \"../components/Profile/Followers\";\r\nimport Following from \"../components/Profile/Following\";\r\nimport UpdateProfile from \"../components/Profile/UpdateProfile\";\r\nimport Settings from \"../components/Profile/Settings\";\r\nimport { PostDeleteToastr } from \"../components/Layout/Toastr\";\r\n\r\nfunction ProfilePage({\r\n  errorLoading,\r\n  profile,\r\n  followersLength,\r\n  followingLength,\r\n  user,\r\n  userFollowStats\r\n}) {\r\n  const router = useRouter();\r\n\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showToastr, setShowToastr] = useState(false);\r\n\r\n  const [activeItem, setActiveItem] = useState(\"profile\");\r\n  const handleItemClick = clickedTab => setActiveItem(clickedTab);\r\n\r\n  const [loggedUserFollowStats, setUserFollowStats] = useState(userFollowStats);\r\n\r\n  const ownAccount = profile.user._id === user._id;\r\n\r\n  if (errorLoading) return <NoProfile />;\r\n\r\n  useEffect(() => {\r\n    const getPosts = async () => {\r\n      setLoading(true);\r\n\r\n      try {\r\n        const { username } = router.query;\r\n        const res = await axios.get(`${baseUrl}/api/profile/posts/${username}`, {\r\n          headers: { Authorization: cookie.get(\"token\") }\r\n        });\r\n\r\n        setPosts(res.data);\r\n      } catch (error) {\r\n        alert(\"Error Loading Posts\");\r\n      }\r\n\r\n      setLoading(false);\r\n    };\r\n    getPosts();\r\n  }, [router.query.username]);\r\n\r\n  useEffect(() => {\r\n    showToastr && setTimeout(() => setShowToastr(false), 3000);\r\n  }, [showToastr]);\r\n\r\n  return (\r\n    <>\r\n      {showToastr && <PostDeleteToastr />}\r\n\r\n      <Grid stackable>\r\n        <Grid.Row>\r\n          <Grid.Column>\r\n            <ProfileMenuTabs\r\n              activeItem={activeItem}\r\n              handleItemClick={handleItemClick}\r\n              followersLength={followersLength}\r\n              followingLength={followingLength}\r\n              ownAccount={ownAccount}\r\n              loggedUserFollowStats={loggedUserFollowStats}\r\n            />\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n\r\n        <Grid.Row>\r\n          <Grid.Column>\r\n            {activeItem === \"profile\" && (\r\n              <>\r\n                <ProfileHeader\r\n                  profile={profile}\r\n                  ownAccount={ownAccount}\r\n                  loggedUserFollowStats={loggedUserFollowStats}\r\n                  setUserFollowStats={setUserFollowStats}\r\n                />\r\n\r\n                {loading ? (\r\n                  <PlaceHolderPosts />\r\n                ) : posts.length > 0 ? (\r\n                  posts.map(post => (\r\n                    <CardPost\r\n                      key={post._id}\r\n                      post={post}\r\n                      user={user}\r\n                      setPosts={setPosts}\r\n                      setShowToastr={setShowToastr}\r\n                    />\r\n                  ))\r\n                ) : (\r\n                  <NoProfilePosts />\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            {activeItem === \"followers\" && (\r\n              <Followers\r\n                user={user}\r\n                loggedUserFollowStats={loggedUserFollowStats}\r\n                setUserFollowStats={setUserFollowStats}\r\n                profileUserId={profile.user._id}\r\n              />\r\n            )}\r\n\r\n            {activeItem === \"following\" && (\r\n              <Following\r\n                user={user}\r\n                loggedUserFollowStats={loggedUserFollowStats}\r\n                setUserFollowStats={setUserFollowStats}\r\n                profileUserId={profile.user._id}\r\n              />\r\n            )}\r\n\r\n            {activeItem === \"updateProfile\" && <UpdateProfile Profile={profile} />}\r\n\r\n            {activeItem === \"settings\" && (\r\n              <Settings newMessagePopup={user.newMessagePopup} />\r\n            )}\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n\r\nProfilePage.getInitialProps = async ctx => {\r\n  try {\r\n    const { username } = ctx.query;\r\n    const { token } = parseCookies(ctx);\r\n\r\n    const res = await axios.get(`${baseUrl}/api/profile/${username}`, {\r\n      headers: { Authorization: token }\r\n    });\r\n\r\n    const { profile, followersLength, followingLength } = res.data;\r\n\r\n    return { profile, followersLength, followingLength };\r\n  } catch (error) {\r\n    return { errorLoading: true };\r\n  }\r\n};\r\n\r\nexport default ProfilePage;\r\n"]},"metadata":{},"sourceType":"module"}